<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

		<title>MooLego Speed Test</title>

		<script type="text/javascript" src="mootools/core.js"></script>
		<script type="text/javascript" src="mootools/more.js"></script>
			
		<script type="text/javascript" src="../Utils/mooCanvas.js"></script>
		
		<script type="text/javascript" src="../Source/Core/UI.js"></script>
		<script type="text/javascript" src="../Source/Core/Canvas.js"></script>
		<script type="text/javascript" src="../Source/Core/Skin.js"></script>
		
		<script type="text/javascript" src="../Source/Element/Element.js"></script>
		<script type="text/javascript" src="../Source/Element/Element.Controller.js"></script>
		<script type="text/javascript" src="../Source/Element/Label.js"></script>
		
		<script type="text/javascript" src="../Source/Form/Control.js"></script>
		<script type="text/javascript" src="../Source/Form/Button.js"></script>
		<script type="text/javascript" src="../Source/Form/Slider.js"></script>
		
		<script type="text/javascript" src="../Source/View/View.js"></script>
		
		<script type="text/javascript" src="../Source/Window/Window.Controller.js"></script>
		<script type="text/javascript" src="../Source/Window/Window.js"></script>
		
		<script type="text/javascript" src="../Skins/AquaGraphite.js"></script>
		<script type="text/javascript" src="../Skins/Demo.js"></script>
		<script type="text/javascript" src="../Skins/TouchBlue.js"></script>
			
		<script type="text/javascript" src="js/examples.js"></script>
		
		<script type="text/javascript">
		//<!--/*--><![CDATA[//><!--
			window.addEvent('domready', function(){
				
				//(?) settings
				var offone = 0;
				var offtwo = 0;
				var ratioone = 40;
				var ratiotwo = 40;
				
				//shape setting
				var radius = 0;
				var offset = 2;
				var height = 46;
				var margin = 0;
				var fontSize = 12;
				
				buttons = new Array();
				
				var slidator = new UI.Window({
					title : 'Inspector',
					width : 240,
					height : 350,
					location: 'custom',
					controls : [],
					left : 850,
					top: 70,
					resizable: false,
					type : 'transparent',
					view : {
						overflow : 'hidden'
					}
				});
				
				var baseParams = {
					skin 				: 'TouchBlue',
					range 				: [-10, 10],
					snap 				: true,
					steps 				: 20,
					styles 				: {
						margin			: '3px 20px',
						display			: 'block'
					},
					wheel				: true
				}
				
				new UI.Label({
					html : 'color offset',
					styles : {
						margin: '0 10px'
					}
				}).inject(slidator);
				
				new UI.Slider($merge(baseParams, {
					onInjected : function(){
						this.set(offone);
					},
					onChange: function(step){
						offone = step;
					}
				})).inject(slidator);
				
				new UI.Slider($merge(baseParams, {
					onInjected : function(){
						this.set(offtwo);
					},
					onChange: function(step){
						offtwo = step;
					}
				})).inject(slidator);
				
				new UI.Label({
					html : 'color propagation',
					styles : {
						margin: '0 10px'
					}
				}).inject(slidator);
				
				new UI.Slider($merge(baseParams, {
					range : [10, 42],
					steps : 32,
					onInjected : function(){
						this.set(ratioone);
					},
					onChange: function(step){
						ratioone = step;
					}
				})).inject(slidator);
				
				new UI.Slider($merge(baseParams, {
					range : [10, 42],
					steps : 32,
					onInjected : function(){
						this.set(ratiotwo);
					},
					onChange: function(step){
						ratiotwo = step;
					}
				})).inject(slidator);
					
				new UI.Label({
					html : 'Radius',
					styles : {
						margin: '0 10px'
					}
				}).inject(slidator);
				
				new UI.Slider($merge(baseParams, {
					range : [4, 30],
					steps : 27,
					onInjected : function(){
						this.set(radius);
					},
					onChange: function(step){
						radius = step;
					}
				})).inject(slidator);
				
				new UI.Label({
					html : 'Layers offset',
					styles : {
						margin: '0 10px'
					}
				}).inject(slidator);
				
				new UI.Slider($merge(baseParams, {
					range : [0, 10],
					steps : 10,
					onInjected : function(){
						this.set(offset);
					},
					onChange: function(step){
						offset = step;
					}
				})).inject(slidator);
				
				new UI.Label({
					html : "Button's height",
					styles : {
						margin: '0 10px'
					}
				}).inject(slidator);
				
				new UI.Slider($merge(baseParams, {
					range : [40, 80],
					steps : 40,
					onInjected : function(){
						this.set(height);
					},
					onChange: function(step){
						height = step;
					}
				})).inject(slidator);
				
				new UI.Label({
					html : "Font Size",
					styles : {
						margin: '0 10px'
					}
				}).inject(slidator);
				
				new UI.Slider($merge(baseParams, {
					range : [8, 20],
					steps : 12,
					onInjected : function(){
						this.set(fontSize);
					},
					onChange: function(step){
						fontSize = step;
					}
				})).inject(slidator);
				
				new UI.Label({
					html : "Margin",
					styles : {
						margin: '0 10px'
					}
				}).inject(slidator);
				
				new UI.Slider($merge(baseParams, {
					range : [0, 20],
					steps : 20,
					onInjected : function(){
						this.set(margin);
					},
					onChange: function(step){
						margin = step;
					}
				})).inject(slidator);
				
				var button = new UI.Button({
					label	: 'Update buttons',
					onClick	: function(){
						fillButtons();
					},
					styles	: {
						margin		: "20px 0 0 107px",
						fontFamily	: 'arial, helvetica, sans-serif',
						fontSize	: '13px'
					}
				}).inject(slidator);				
								
				var box = new Element('div',{
					styles			: {
						padding		: '8px 16px',
						width		: '820px',
						height		: '580px',
						overflow	: 'hidden'
					}
				}).inject(document.body);
				
				
				
				function fillButtons() {
					var size = 7;
					time = $time();
					var index = 0;
					for (i = 0; i < size; i++) {
						for (j = 0; j < size; j++) {
						
							var one = size - i + offone;
							var two = size - j + offtwo;
							
							var color = RGBtoHex(0,Math.floor(255 - ratioone * one),  Math.floor(255 - ratiotwo * two));
							//console.log(index)
							if (buttons[index]) {
								var states = ['default', 'over', 'down'];
								states.each(function(state){
									buttons[index].skin[state].layers.emboss.radius = radius;
									buttons[index].skin[state].layers.front.color = '#' + color;
									buttons[index].skin[state].layers.front.radius = radius -2;
									buttons[index].skin[state].layers.front.offset = offset;
									buttons[index].skin[state].layers.reflect.radius = radius -4;
									buttons[index].skin[state].styles.margin = margin;
									buttons[index].skin[state].styles.fontSize = fontSize;
									
									buttons[index].set('html', '<small>time</small><br/>' + (($time() - time) / 1000) + '<br/><small style="font-size:5px: color:#ccc">color</small><br/>' + color);
									//console.log(index)
								})
							}
							else {
								buttons.push(new UI.Button({
									label: '<small>time</small><br/>' + (($time() - time) / 1000) + '<br/><small style="font-size:5px: color:#ccc">color</small><br/>' + color,
									skin: 'demo',
									type: 'jgood',
									props: {
										'default': {
											size : ['auto', height],
											styles : {
												fontSize : fontSize,
												margin : margin
											},
											layers: {
												emboss: {
													offset: '0px',
													color: '#000',
													opacity: .17,
													radius: radius
												},
												
												front: {
													offset: offset,
													opacity: 1,
													color: '#' + color,
													radius: radius -2
												},
												reflect: {
													offset: [2, 2, '40%'],
													
													gradient	: {
														color: ['#FFF', '#FFF'],
														opacity: [.4, .03]
													},
													radius: radius - 4
												}
											}
										},
										down: {
											layers: {
												front: {
													color: '#333'
												}
											}
										}
									}
								}).inject(box))
							}
							index++;
						}
					}
				};
				
				function toHex(n) {
					if (n==null) return "00";
					n=parseInt(n); if (n==0 || isNaN(n)) return "00";
					n=Math.max(0,n); n=Math.min(n,255); n=Math.round(n);
					return "0123456789ABCDEF".charAt((n-n%16)/16)
					+ "0123456789ABCDEF".charAt(n%16);
				};
				
				function RGBtoHex(R,G,B) {return toHex(R)+toHex(G)+toHex(B)}
				
				fillButtons();
			});
		//--><!]]>
		</script>
	</head>
	<body style="padding:24px; margin: 0 auto">
	</body>
</html>
